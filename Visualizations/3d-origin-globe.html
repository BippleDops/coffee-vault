<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Coffee Origin Globe - Coffee Vault 5.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0f0f1e 100%);
            color: #FFF8E1;
            overflow: hidden;
        }
        #container { width: 100vw; height: 100vh; position: relative; }
        .overlay-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 16px;
            border: 2px solid #FFD700;
            z-index: 100;
            max-width: 350px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
        }
        h1 {
            font-size: 24px;
            color: #FFD700;
            margin-bottom: 15px;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
            font-size: 14px;
        }
        .stat-label { color: #D4A574; }
        .stat-value { color: #FFD700; font-weight: 700; }
        .control-btn {
            width: 100%;
            padding: 12px;
            margin-top: 12px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(218, 165, 32, 0.3));
            border: 2px solid #FFD700;
            border-radius: 10px;
            color: #FFD700;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .control-btn:hover {
            background: linear-gradient(135deg, #FFD700, #DAA520);
            color: #000;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.6);
        }
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.95);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            z-index: 100;
        }
        .legend-title {
            color: #FFD700;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 13px;
            gap: 10px;
        }
        .production-bar {
            height: 12px;
            background: linear-gradient(90deg, transparent 0%, var(--color) 100%);
            border-radius: 6px;
            flex: 1;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <div class="overlay-panel">
        <h1>üåç Coffee Origin Globe</h1>
        <div class="stat-row">
            <span class="stat-label">Total Origins</span>
            <span class="stat-value">65</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Continents</span>
            <span class="stat-value">6</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Major Producers</span>
            <span class="stat-value">25</span>
        </div>
        <button class="control-btn" id="rotate-btn" onclick="toggleRotation()">Start Rotation</button>
        <button class="control-btn" onclick="resetView()">Reset View</button>
        <button class="control-btn" onclick="zoomToRegion()">Zoom to Coffee Belt</button>
    </div>
    
    <div class="legend">
        <div class="legend-title">Production Levels</div>
        <div class="legend-item">
            <span style="width: 80px;">Major</span>
            <div class="production-bar" style="--color: #FFD700; width: 100%;"></div>
        </div>
        <div class="legend-item">
            <span style="width: 80px;">Medium</span>
            <div class="production-bar" style="--color: #FFA500; width: 70%;"></div>
        </div>
        <div class="legend-item">
            <span style="width: 80px;">Small</span>
            <div class="production-bar" style="--color: #87CEEB; width: 40%;"></div>
        </div>
        <div style="margin-top: 12px; font-size: 11px; color: #888;">
            Click markers for origin details
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const origins = [
            { name: 'Brazil', lat: -15, lon: -47, production: 'major', color: 0xFF6B35 },
            { name: 'Colombia', lat: 4, lon: -74, production: 'major', color: 0x4ECDC4 },
            { name: 'Ethiopia', lat: 9, lon: 38, production: 'major', color: 0xFF6B6B },
            { name: 'Vietnam', lat: 16, lon: 108, production: 'major', color: 0x95E1D3 },
            { name: 'Indonesia', lat: -2, lon: 118, production: 'major', color: 0xF38181 },
            { name: 'Kenya', lat: -1, lon: 37, production: 'medium', color: 0xFFE66D },
            { name: 'Guatemala', lat: 15, lon: -90, production: 'medium', color: 0xA8E6CF },
            { name: 'Peru', lat: -10, lon: -76, production: 'medium', color: 0xFFDAB9 },
            { name: 'Honduras', lat: 14, lon: -87, production: 'medium', color: 0xF7DC6F },
            { name: 'Nicaragua', lat: 12, lon: -85, production: 'medium', color: 0xBB8FCE },
            { name: 'Costa Rica', lat: 10, lon: -84, production: 'small', color: 0x85C1E2 },
            { name: 'Panama', lat: 9, lon: -80, production: 'small', color: 0xF8B195 },
            { name: 'Rwanda', lat: -2, lon: 30, production: 'small', color: 0xC06C84 },
            { name: 'Burundi', lat: -3, lon: 30, production: 'small', color: 0x6C5B7B },
            { name: 'Tanzania', lat: -6, lon: 35, production: 'small', color: 0x355C7D }
        ];
        
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0a0a1a);
        
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 80);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('container').appendChild(renderer.domElement);
        
        // Create Earth globe
        const globeGeometry = new THREE.SphereGeometry(30, 64, 64);
        const globeMaterial = new THREE.MeshPhongMaterial({
            color: 0x2B1810,
            emissive: 0x1a0f0a,
            emissiveIntensity: 0.3,
            shininess: 15,
            transparent: true,
            opacity: 0.95
        });
        const globe = new THREE.Mesh(globeGeometry, globeMaterial);
        scene.add(globe);
        
        // Add wireframe for detail
        const wireframeGeo = new THREE.SphereGeometry(30.1, 32, 32);
        const wireframeMat = new THREE.MeshBasicMaterial({
            color: 0x8D6E63,
            wireframe: true,
            transparent: true,
            opacity: 0.1
        });
        const wireframe = new THREE.Mesh(wireframeGeo, wireframeMat);
        scene.add(wireframe);
        
        // Add origin markers
        const markers = [];
        origins.forEach(origin => {
            const phi = (90 - origin.lat) * (Math.PI / 180);
            const theta = (origin.lon + 180) * (Math.PI / 180);
            
            const x = 30 * Math.sin(phi) * Math.cos(theta);
            const y = 30 * Math.cos(phi);
            const z = 30 * Math.sin(phi) * Math.sin(theta);
            
            const sizeMap = { major: 1.2, medium: 0.8, small: 0.5 };
            const size = sizeMap[origin.production];
            
            const markerGeo = new THREE.SphereGeometry(size, 16, 16);
            const markerMat = new THREE.MeshPhongMaterial({
                color: origin.color,
                emissive: origin.color,
                emissiveIntensity: 0.6
            });
            const marker = new THREE.Mesh(markerGeo, markerMat);
            marker.position.set(x, y, z);
            marker.userData = origin;
            
            scene.add(marker);
            markers.push(marker);
            
            // Add glow
            const glowGeo = new THREE.SphereGeometry(size * 1.5, 16, 16);
            const glowMat = new THREE.MeshBasicMaterial({
                color: origin.color,
                transparent: true,
                opacity: 0.3
            });
            const glow = new THREE.Mesh(glowGeo, glowMat);
            glow.position.copy(marker.position);
            scene.add(glow);
        });
        
        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 1.5);
        scene.add(ambientLight);
        
        const sunLight = new THREE.DirectionalLight(0xFFD700, 1.5);
        sunLight.position.set(50, 50, 50);
        scene.add(sunLight);
        
        const fillLight = new THREE.DirectionalLight(0x4ECDC4, 0.5);
        fillLight.position.set(-50, -50, -50);
        scene.add(fillLight);
        
        // Stars background
        const starsGeo = new THREE.BufferGeometry();
        const starsMat = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.5 });
        const starsVertices = [];
        for (let i = 0; i < 1000; i++) {
            const x = (Math.random() - 0.5) * 200;
            const y = (Math.random() - 0.5) * 200;
            const z = (Math.random() - 0.5) * 200;
            starsVertices.push(x, y, z);
        }
        starsGeo.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
        const stars = new THREE.Points(starsGeo, starsMat);
        scene.add(stars);
        
        // Rotation control
        let isRotating = false;
        let rotationSpeedValue = 0.002;
        let isDragging = false;
        let previousMouse = { x: 0, y: 0 };
        let rotation = { x: 0, y: 0 };
        
        function toggleRotation() {
            isRotating = !isRotating;
            document.getElementById('rotate-btn').textContent = isRotating ? 'Stop Rotation' : 'Start Rotation';
        }
        
        function resetView() {
            camera.position.set(0, 0, 80);
            rotation = { x: 0, y: 0 };
            camera.lookAt(0, 0, 0);
        }
        
        function zoomToRegion() {
            camera.position.set(0, 20, 60);
            camera.lookAt(0, 0, 0);
        }
        
        // Manual controls
        renderer.domElement.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMouse = { x: e.clientX, y: e.clientY };
        });
        
        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMouse.x;
                const deltaY = e.clientY - previousMouse.y;
                rotation.y += deltaX * 0.005;
                rotation.x += deltaY * 0.005;
                previousMouse = { x: e.clientX, y: e.clientY };
            }
        });
        
        renderer.domElement.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        renderer.domElement.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomSpeed = 2;
            camera.position.z = Math.max(40, Math.min(120, camera.position.z + e.deltaY * zoomSpeed * 0.1));
        });
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (isRotating && !isDragging) {
                rotation.y += rotationSpeedValue;
            }
            
            globe.rotation.y = rotation.y;
            globe.rotation.x = rotation.x;
            wireframe.rotation.copy(globe.rotation);
            
            // Rotate markers with globe
            markers.forEach((marker, i) => {
                marker.rotation.copy(globe.rotation);
            });
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>

